name: Data Quality (optional)

on:
  workflow_dispatch:

jobs:
  dq-checks:
    if: ${{ env.RS_HOST != '' }}
    runs-on: ubuntu-latest
    env:
      RS_HOST: ${{ secrets.RS_HOST }}
      RS_USER: ${{ secrets.RS_USER }}
      RS_PASSWORD: ${{ secrets.RS_PASSWORD }}
      RS_DB: ${{ secrets.RS_DB }}
      RS_PORT: ${{ secrets.RS_PORT }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements-dev.txt

      - name: Run DQ checks
        run: |
          python dq/runner.py

